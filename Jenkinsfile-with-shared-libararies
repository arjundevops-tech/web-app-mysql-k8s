@Library('shared_librareis@main') _
pipeline {
    agent any
 stages {
  stage ('Checking version') {
   steps {
     script {
       sh "python3 --version"
       sh "docker --version"
       sh "git --version"
       sh "trivy --version"
    }
  }
 }
stage ('Install dependecies') {
   steps {
    script {
     python_dependencies()
    }
   }
  }
  /*stage ('test') {
   steps {
    script {
      pytest() 
   }
  }
}*/
stage ('sonar analysis') { 
  steps {
   script {
     sonar_analysis(
       toolName : "sonar-scanner",
       sonarEnv : "sonar",
       projectKey : "web-app-mysql-k8s"
    )
  }
}
}
}
}
     

